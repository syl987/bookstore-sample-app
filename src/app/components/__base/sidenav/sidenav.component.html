@if (user(); as user) {
  <div class="mt-10 mb-4 flex flex-col items-center">
    <img [src]="user?.photoURL" alt="user" width="128" height="128" class="rounded-circle mb-2 border p-1 text-xs font-normal" i18n-alt />
    {{ user?.displayName }}
  </div>

  <mat-nav-list>
    @for (link of publicLinks; track link.path) {
      <a mat-list-item [routerLink]="link.path" routerLinkActive [activated]="a.isActive" (click)="navigated.emit()" #a="routerLinkActive">
        <mat-icon matListItemIcon>{{ link.icon }}</mat-icon>
        {{ link.label }}
      </a>
    }
  </mat-nav-list>

  <mat-divider class="mx-4" />

  <mat-nav-list>
    @for (link of userLinks; track link.path) {
      <a mat-list-item [routerLink]="link.path" routerLinkActive [activated]="a.isActive" (click)="navigated.emit()" #a="routerLinkActive">
        <mat-icon matListItemIcon>{{ link.icon }}</mat-icon>
        {{ link.label }}
      </a>
    }
  </mat-nav-list>

  <mat-divider class="mx-4" />

  <mat-action-list>
    <button mat-list-item (click)="openUserSessionInfoDialog(user); navigated.emit()">
      <mat-icon matListItemIcon>attribution</mat-icon>
      <span i18n>Session Info</span>
    </button>

    <button mat-list-item (click)="logout(); navigated.emit()">
      <mat-icon matListItemIcon>logout</mat-icon>
      <span i18n>Logout</span>
    </button>
  </mat-action-list>
} @else {
  <div class="mt-10 mb-4 flex flex-col items-center">
    <div class="rounded-circle mb-2 border p-1" style="width: 128px; height: 128px">
      <div class="rounded-circle bg-light flex h-100 w-100 flex-col items-center justify-center" style="color: lightgrey; font-size: 56px">?</div>
    </div>

    <div i18n>Anonymous User</div>
  </div>

  <mat-nav-list>
    @for (link of publicLinks; track link.path) {
      <a mat-list-item [routerLink]="link.path" routerLinkActive [activated]="a.isActive" (click)="navigated.emit()" #a="routerLinkActive">
        <mat-icon matListItemIcon>{{ link.icon }}</mat-icon>
        {{ link.label }}
      </a>
    }
  </mat-nav-list>

  <mat-divider class="mx-4" />

  <mat-action-list>
    <button mat-list-item (click)="navigateToLogin(); navigated.emit()">
      <mat-icon matListItemIcon>login</mat-icon>
      <span i18n>Login</span>
    </button>
  </mat-action-list>
}
<button mat-icon-button (click)="navigated.emit()" class="absolute end-0 top-0 m-2" aria-label="Close" i18n-aria-label>
  <mat-icon class="align-super">close</mat-icon>
</button>
