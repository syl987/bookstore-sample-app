<mat-toolbar class="shadow">
  <mat-toolbar-row>
    <ng-container *ngIf="desktop$ | async; else mobile">
      <div class="text-primary fs-large me-s">{{ options.applicationName }}</div>

      <a mat-button *ngFor="let link of PUBLIC_LINKS" color="primary" [routerLink]="link.path" routerLinkActive="active">{{ link.label }}</a>

      <span class="ms-2xs me-auto"></span>

      <ng-container *ngIf="user$ | async as user; else public">
        <button mat-button (click)="openUserSettingsDialog(user)">
          <app-header-user-info [user]="user" />
        </button>

        <mat-divider vertical class="mx-2xs" style="height: 32px" />

        <a mat-button *ngFor="let link of USER_LINKS" color="primary" [routerLink]="link.path" routerLinkActive="active">{{ link.label }}</a>

        <button mat-button color="primary" [matMenuTriggerFor]="languageMenu">Language</button>

        <button mat-button color="primary" (click)="logout()" class="me-n2xs">Logout</button>
      </ng-container>
    </ng-container>
  </mat-toolbar-row>
</mat-toolbar>

<mat-menu xPosition="before" #languageMenu="matMenu">
  <a mat-menu-item *ngFor="let language of APP_LANGUAGES" [href]="language.href">
    {{ language.label }}
    <mat-icon fontSet="fp" [fontIcon]="language.icon" />
  </a>
</mat-menu>

<ng-template #public>
  <button mat-button color="primary" [matMenuTriggerFor]="languageMenu">Language</button>

  <a *ngIf="displayLogin$ | async" mat-button color="primary" routerLink="/login" class="me-ns">Login</a>
</ng-template>

<ng-template #mobile>
  <button mat-icon-button color="primary" (click)="sidenavToggle.emit()" aria-label="Toggle Navigation" class="ms-nxs me-3xs">
    <mat-icon fontIcon="fa-bars" style="font-size: 20px" />
  </button>

  <div class="text-primary fs-normal me-s">{{ options.applicationName }}</div>
</ng-template>
