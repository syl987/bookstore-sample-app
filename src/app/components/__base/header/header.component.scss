@use '@angular/material' as mat;

@import 'shared';

.mat-toolbar-row {
  @include app-container-fluid;

  [mat-button]:first-child {
    margin-left: -8px;
  }

  [mat-button]:last-child {
    margin-right: -8px;
  }

  [mat-icon-button]:first-child {
    margin-left: -12px;
  }

  [mat-icon-button]:last-child {
    margin-right: -12px;
  }
}

::ng-deep .cdk-overlay-pane.app-search-overlay .mat-mdc-form-field .mat-mdc-text-field-wrapper::after,
.mat-toolbar .mat-mdc-form-field ::ng-deep .mat-mdc-text-field-wrapper::after,
.mat-toolbar .mat-mdc-button::after {
  content: '';

  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);

  display: block;

  width: 0;
  height: 4px;

  background-color: $primary;

  transition: width 0.3s;
}

::ng-deep .cdk-overlay-pane.app-search-overlay .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper::after,
.mat-toolbar .mat-mdc-form-field.mat-focused ::ng-deep .mat-mdc-text-field-wrapper::after,
.mat-toolbar .mat-mdc-button.active::after {
  width: calc(100% - 16px);
  transition: width 0.3s;
}

.mat-toolbar div {
  display: flex;
  align-items: center;
  height: 100% !important;

  // hardcoded mat-toolbar mobile breakpoint
  @media (width <= 599px) {
    line-height: 57px !important; // pull slightly down (header height is 56px on mobile)
  }
}

::ng-deep .cdk-overlay-pane.app-search-overlay .mat-mdc-form-field .mat-mdc-text-field-wrapper,
.mat-toolbar .mat-mdc-button,
.mat-toolbar .mat-mdc-icon-button,
:host .mat-toolbar .mat-mdc-icon-button ::ng-deep .mat-mdc-button-persistent-ripple {
  height: 100% !important;
  border-radius: 0 !important;
}

.mat-mdc-form-field ::ng-deep {
  .mat-mdc-form-field-infix {
    height: 64px; // matches toolbar height for desktop layout
    padding-top: 21px !important;
    padding-bottom: 19px !important;

    // match mobile toolbar breakpoint
    @media (width <= 599px) {
      height: 56px; // matches toolbar height for mobile layout
    }
  }

  .mdc-line-ripple {
    opacity: 0 !important;
  }

  .mat-mdc-form-field-subscript-wrapper {
    height: 0;
  }
}

::ng-deep .app-search-overlay {
  // 53px = button(48px - 12px) + divider(8px + 1px + 8px)
  right: 53px - 8px + 4px !important;

  // 36px = button(48px - 12px)
  left: 36px + 4px !important;
  margin-right: app-spacer(4);

  // align with container paddings
  margin-left: app-spacer(4);

  @media (min-width: app-grid-breakpoint('sm')) {
    margin-right: app-spacer(6);
    margin-left: app-spacer(6);
  }

  @media (min-width: app-grid-breakpoint('xl')) {
    margin-right: app-spacer(8);
    margin-left: app-spacer(8);
  }

  // center input element within the form field
  // match mobile toolbar breakpoint
  @media (width <= 599px) {
    .mat-mdc-form-field-infix {
      margin-top: -4px;
      margin-bottom: 4px;
    }
  }
}
