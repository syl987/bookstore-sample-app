<div class="app-container">
  <p>This is a collection of your books. Once you publish a book, it will be available for other users to buy.</p>

  <button mat-stroked-button color="primary" (click)="openBookCreateDialog()">New Book</button>
</div>

<div *ngIf="(booksDraft$ | async)?.length" class="app-container">
  <h2>Draft</h2>

  <p>Carefully fill in the book details. Once published, the book will be available to other users and its data cannot be changed.</p>

  <div class="row">
    <div *ngFor="let book of booksDraft$ | async" class="col-sm-6 col-lg-4 col-xl-3 mb-m">
      <mat-card>
        <mat-card-header>
          <img mat-card-sm-image [src]="book.volume.volumeInfo.imageLinks.thumbnail" alt="user" class="order-first me-s" />
          <mat-card-title>{{ book.volume.volumeInfo.title }}</mat-card-title>
          <mat-card-subtitle>{{ book.volume.volumeInfo.authors }}</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content class="py-2xs">
          <p>{{ book.volume.volumeInfo.description | slice : 0 : 100 }}...</p>
        </mat-card-content>

        <mat-card-actions>
          <a mat-button color="primary" routerLink="/user/books/{{ book.id }}/edit">Details</a>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>

<div *ngIf="(booksPublished$ | async)?.length" class="app-container">
  <h2>Published</h2>

  <p>These books are publicly accessible and available for buying.</p>

  <div class="row">
    <div *ngFor="let book of booksPublished$ | async" class="col-sm-6 col-lg-4 col-xl-3 mb-m">
      <mat-card>
        <mat-card-header>
          <img mat-card-sm-image [src]="book.volume.volumeInfo.imageLinks.thumbnail" alt="user" class="order-first me-s" />
          <mat-card-title>{{ book.volume.volumeInfo.title }}</mat-card-title>
          <mat-card-subtitle>{{ book.volume.volumeInfo.authors }}</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content class="py-2xs">
          <p>{{ book.volume.volumeInfo.description | slice : 0 : 100 }}...</p>
        </mat-card-content>

        <mat-card-actions>
          <a mat-button color="primary" routerLink="/books/{{ book.id }}">Details</a>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>

<div *ngIf="(booksSold$ | async)?.length" class="app-container">
  <h2>Sold</h2>

  <p>Sold books are not publicly visible any more but they will remain listed here.</p>

  <div class="row">
    <div *ngFor="let book of booksSold$ | async" class="col-sm-6 col-lg-4 col-xl-3 mb-m">
      <mat-card>
        <mat-card-header>
          <img mat-card-sm-image [src]="book.volume.volumeInfo.imageLinks.thumbnail" alt="user" class="order-first me-s" />
          <mat-card-title>{{ book.volume.volumeInfo.title }}</mat-card-title>
          <mat-card-subtitle>{{ book.volume.volumeInfo.authors }}</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content class="py-2xs">
          <p>{{ book.volume.volumeInfo.description | slice : 0 : 100 }}...</p>
        </mat-card-content>

        <mat-card-actions>
          <a mat-button color="primary" routerLink="/books/{{ book.id }}">Details</a>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>
